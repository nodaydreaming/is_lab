<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>网络与信息安全实验室后台</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">

    <link rel="stylesheet" href="../../layui/css/layui.css"  media="all">
    <link rel="stylesheet" href="../../layui/css/global.css" media="all">
    <link rel="stylesheet" href="../../layui/css/modules/code.css" media="all">
    <link rel="stylesheet" href="../../layui/css/modules/layer/default/layer.css" media="all">

    <script type="text/javascript" src="../../js/jquery-1.10.2.js"></script>
    <script type="text/javascript" src="../../layui/layui.all.js"></script>
    <script type="text/javascript" src="../../layui/lay/modules/layer.js"></script>
    <script type="text/javascript" src="../../layui/lay/modules/jquery.js"></script>

    <script type="text/javascript" src="../js/general.js"></script>
    <script type="text/javascript" charset="UTF-8" src="../../ueditor/ueditor.config.js"></script>
    <script type="text/javascript" charset="UTF-8" src="../../ueditor/ueditor.all.js"></script>
    <script type="text/javascript" charset="UTF-8" src="../../ueditor/lang/zh-cn/zh-cn.js"></script>
    <style>
        .layui-nav-tree{vertical-align: top;}
    </style>
</head>
<body>
    <div class="layui-layout layui-layout-admin">
        <div class="layui-header header header-demo" winter="">
            <div class="layui-main">
                <a class="" href="../main.html" style="font-size: 17px;color: white; line-height: 55px; font-weight: 500">
                    网络与信息安全实验室
                </a>
                <ul class="layui-nav">
                    <li class="layui-nav-item">
                        <a href="../../Lab301Home.html">返回首页</a>
                    </li>
                    <li class="layui-nav-item" lay-unselect="" id="showDlLi" onmouseover="change('block')" onmouseout="change('none')">
                        <a href="javascript:;">
                            <img src="../../images/user_default.jpg" class="layui-nav-img">
                            我
                            <span class="layui-nav-more"></span>
                        </a>
                        <dl class="layui-nav-child layui-anim layui-anim-upbit" id="list_cur" style="top: 60px;">
                            <dd style="border: 0px; height: 5px;"></dd>
                            <dd><a onclick="updatePwd()" style="cursor:pointer;">修改密码</a></dd>
                            <dd><a onclick="updateAdminInfo()" style="cursor:pointer;">修改信息</a></dd>
                            <dd><a onclick="signOut()" style="cursor:pointer;">退出</a></dd>
                        </dl>
                    </li>
                    <span class="layui-nav-bar" style="left: 6.01px; top: 55px; width: 0px; opacity: 0;"></span>
                </ul>
            </div>
        </div>
        <!-- 让IE8/9支持媒体查询，从而兼容栅格 -->
        <!--[if lt IE 9]>
        <script src="https://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
        <script src="https://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->
        <div class="layui-side layui-bg-black">
            <div class="layui-side-scroll">
                <ul class="layui-nav layui-nav-tree site-demo-nav">
                    <li class="layui-nav-item">
                        <a href="javascript:;" onclick="aClick()">基础信息修改<span class="layui-nav-more"></span></a>
                        <!-- <span class="layui-nav-more"></span> -->
                        <dl class="layui-nav-child">
                            <dd class="">
                                <a class="aHover" href="../info/libIntro.html">实验室简介</a>
                            </dd>
                            <dd class="">
                                <a class="aHover" href="../info/achievementSummary.html">成果总览</a>
                            </dd>
                            <dd class="">
                                <a class="aHover" href="../info/awards.html">获奖情况</a>
                            </dd>
                            <dd class="">
                                <a class="aHover" href="../info/researchDirection.html">研究方向</a>
                            </dd>
                            <dd class="">
                                <a class="aHover" href="../info/teacher.html">指导老师</a>
                            </dd>
                            <dd class="">
                                <a class="aHover" href="../info/rule.html">规章制度</a>
                            </dd>
                            <dd class="">
                                <a class="aHover" href="../info/registration.html">报名情况</a>
                            </dd>
                        </dl>
                    </li>

                    <li class="layui-nav-item">
                        <a href="javascript:;" onclick="aClick()">成员管理<span class="layui-nav-more"></span></a>
                        <dl class="layui-nav-child">
                            <dd class="">
                                <a class="aHover" href="../member/postgraduate.html">研究生</a>
                            </dd>
                            <dd class="">
                                <a class="aHover" href="../member/undergraduate.html">本科生</a>
                            </dd>
                            <dd class="">
                                <a class="aHover" href="../member/graduate.html">毕业生</a>
                            </dd>
                        </dl>
                    </li>

                    <li class="layui-nav-item">
                        <a href="javascript:;" onclick="aClick()">成果管理<span class="layui-nav-more"></span></a>
                        <dl class="layui-nav-child">
                            <dd class="">
                                <a class="aHover" href="../achievement/project.html">项目</a>
                            </dd>
                            <dd class="">
                                <a class="aHover" href="../achievement/works.html">作品</a>
                            </dd>
                            <dd class="">
                                <a class="aHover" href="../achievement/paper.html">论文</a>
                            </dd>
                            <dd class="">
                                <a class="aHover" href="../achievement/patent.html">专利</a>
                            </dd>
                            <dd class="">
                                <a class="aHover" href="../achievement/softwareCopyright.html">软著</a>
                            </dd>
                            <dd class="">
                                <a class="aHover" href="../achievement/competition.html">竞赛</a>
                            </dd>
                        </dl>
                    </li>
                    <!--<li class="layui-nav-item">-->
                        <!--<a href="javascript:;" onclick="aClick()">公告通知<span class="layui-nav-more"></span></a>-->
                        <!--<dl class="layui-nav-child">-->
                            <!--<dd class="">-->
                                <!--<a class="aHover" href="../notice/notice.html">公告</a>-->
                            <!--</dd>-->
                            <!--<dd class="">-->
                                <!--<a class="aHover" href="../notice/inform.html">通知</a>-->
                            <!--</dd>-->
                        <!--</dl>-->
                    <!--</li>-->
                    <li class="layui-nav-item layui-nav-itemed">
                        <a href="javascript:;" onclick="aClick()">实验室文化<span class="layui-nav-more"></span></a>
                        <dl class="layui-nav-child">
                            <dd class="">
                                <a class="aHover" href="cucoloris.html">生活剪影</a>
                            </dd>
                            <dd class="">
                                <a class="aHover" href="leagueBuilding.html">团建活动</a>
                            </dd>
                            <dd class="">
                                <a class="aHover" href="graduationPhoto.html">毕业时分</a>
                            </dd>
                            <dd class="layui-this">
                                <a class="aHover" href="#">添加实验室文化</a>
                            </dd>
                        </dl>
                    </li>
                    <li class="layui-nav-item">
                        <a href="javascript:;" onclick="aClick()">管理员信息<span class="layui-nav-more"></span></a>
                        <dl class="layui-nav-child">
                            <dd class="">
                                <a class="aHover" href="../user_info/addUser.html">添加管理员</a>
                            </dd>
                            <dd class="">
                                <a class="aHover" href="../user_info/updateUser.html">管理员列表</a>
                            </dd>
                        </dl>
                    </li>

                    <li class="layui-nav-item" style="height: 30px; text-align: center"></li>
                    <span class="layui-nav-bar" id = "nav-bar" style="top: 232.5px; height: 0px; opacity: 0;"></span>
                </ul>
            </div>
        </div>
    </div>

    <div class="layui-body layui-tab-content site-demo site-demo-body" style="margin-top: 70px; text-align: center">
        <p style="width: 100%;font-size: 36px; font-family: STXingkai;">添加实验室文化</p>
        <form class="layui-form" action="" style="width: 100%; text-align: center;">
            <div class="layui-inline layui-form-item" style="float: left;margin: 15px 0 0 150px;">
                <label class="layui-form-label">文化类型</label>
                <div class="layui-input-inline">
                    <select name="modules">
                        <option value="">请选择</option>
                        <option value="1">生活剪影</option>
                        <option value="2">团建活动</option>
                        <option value="3">毕业时分</option>
                    </select>
                </div>
                <label class="layui-form-label" style="margin-left: 100px">标题</label>
                <div class="layui-input-inline">
                    <input type="text" name="title" id="cultureTitle" autocomplete="off" placeholder="请输入标题" class="layui-input" style="width: 350px;" onchange="inputLimit()" onkeydown="inputLimit()" onkeyup="inputLimit()">
                </div>
            </div>
            <!--<div class="layui-form-item layui-inline" style="float: left; margin: 15px 0 0 90px;">-->
                <!---->
            <!--</div>-->
            <div class="layui-form-item" style="padding-top: 20px;">
                <div style="width: 100%; text-align: center;">
                    <script id="ueditor" type="text/plain" style="width: 90%; height: 400px; margin-left: 10%;">
                    </script>
                </div>
            </div>
            <div style="margin: 30px; text-align: center;">
                <input type="button" value="确定" onclick="addCulture()" class="layui-btn layui-btn-fluid" style="width: 236px;">
            </div>
        </form>
    </div>
    <script>
        layui.use('form', function(){
            var form = layui.form;
            form.render();
            form.verify();
        });
        var ue = UE.getEditor("ueditor",{toolbars: [[
                'undo', 'redo', '|',
                'bold', 'italic', 'underline', 'fontborder', 'strikethrough', 'superscript', 'subscript', 'removeformat', 'formatmatch', 'autotypeset', 'blockquote', 'pasteplain', '|', 'forecolor', 'backcolor', 'insertorderedlist', 'insertunorderedlist', 'selectall', 'cleardoc', '|',
                'rowspacingtop', 'rowspacingbottom', 'lineheight', '|',
                'customstyle', 'paragraph', 'fontfamily', 'fontsize', '|',
                'directionalityltr', 'directionalityrtl', 'indent', '|',
                'justifyleft', 'justifycenter', 'justifyright', 'justifyjustify', '|', 'touppercase', 'tolowercase', '|',
                'link', 'unlink', 'anchor', '|',
                'simpleupload', 'insertimage', 'emotion', 'scrawl', 'insertvideo', '|',
                'horizontal', 'date', 'time', 'spechars', '|',
                'inserttable', 'deletetable', 'insertparagraphbeforetable', 'insertrow', 'deleterow', 'insertcol', 'deletecol', 'mergecells', 'mergeright', 'mergedown', 'splittocells', 'splittorows', 'splittocols', 'charts', '|',
                'searchreplace'
            ]]});

            var mdl = $('dl.layui-anim.layui-anim-upbit')[1];
            $(mdl).css("z-index", 3000);

            function addCulture() {
                var select = document.getElementsByClassName('layui-form-select')[0];
                var selected = select.getElementsByClassName('layui-this')[0];
                var culture_content = ue.getContent();
                var culture_title = document.getElementById('cultureTitle').value;
                var culture_type;
                var type = 0;
                if(selected == null){
                    type = 0;
                }
                else{
                    culture_type = selected.innerText;
                    if(culture_type == "生活剪影"){
                        type = 1;
                    }
                    else if(culture_type == "团建活动"){
                        type = 2;
                    }
                    else if(culture_type == "毕业时分"){
                        type = 3;
                    }
                }

                if(type == 0){
                    layer.msg('请选择文化类型');
                }
                else if(culture_title == null || culture_title == ""){
                    layer.msg('请输入标题');
                }
                else if(culture_content == null || culture_content == ""){
                    layer.msg('请输入内容');
                }
                else{
                    addculture(culture_title, culture_content, type);
                }
            
            }
            function addculture(culture_title, culture_content, type) {
                $.ajax({
                    url : 'addCulture.action',
                    type : 'post',
                    scriptCharset : 'utf-8',
                    data : {"title" : culture_title, "content" : culture_content, "type" : type},
                    success : function (result) {
                        if(result.message == null){
                            layer.open({
                                type: 1,
                                offset: 'auto', //具体配置参考：http://www.layui.com/doc/modules/layer.html#offset
                                id: 'layerDemo1', //防止重复弹出
                                content: '<div style="padding: 20px 100px;">' + "添加成功！" + '</div>',
                                btn: '关闭',
                                btnAlign: 'c', //按钮居中
                                shade: 0.5, //不显示遮罩
                                title: "信息安全实验室",
                                yes: function () {
                                    layer.closeAll();
                                    window.location.reload();
                                }
                            });
                            ue.setContent('');
                            $('#cultureTitle').val("");
                        }
                        else{
                            layer.msg(result.message);
                        }
                    },
                    error : function () {
                        layer.msg('请求Action失败，添加失败！');
                    }
                });
            }
    </script>
</body>

</html>